<form ngNoForm [formGroup]="exploitationForm">
  <div>
    <br>
      <div class="d-flex mb-4">
        <div class="mr-auto py-4 px-5 border-radius-rounded bg-white">
          <hr class="hr-red my-2">
          <p>Bienvenue <span class="text-success text-font-bold">{{currentUser?.prenom}}</span>,
            <br>
            <b>dans votre espace régional.</b>
          </p>
        </div>
        <div class="p-2">
          <button class="p-2 btn btn-juniper border-radius-rounded">
            <span class="p-2 material-icons">layers</span>
            <label class="align-bottom">NOUVELLE SIMULATION</label>
          </button>
        </div>
        <div class="p-2">
          <app-notification></app-notification>
        </div>
      </div>

  <div class="d-flex float-right mb-4">
    <div class="border-radius-10 bg-white py-3 px-4 m-2 shadow-sm" style="height: 50px;">
      <span class="material-icons text-juniper">
        calendar_today
      </span>
      <span class="p-2 align-super pr-5">January 1- December 1</span>
      <span class="material-icons text-muted">
        chevron_left
      </span>
      <span class="material-icons text-muted">
        chevron_right
      </span>
    </div>
    <div class="border-radius-10 bg-white py-2 px-4 m-2 shadow-sm" style="height: 50px;width: 250px">
      <ng-select class="custom" [items]="regions" bindLabel="libelle" [closeOnSelect]="false" [searchable]="true"
        placeholder="Toutes les régions" [formControlName]="'region'">
      </ng-select>
    </div>
    <div class="border-radius-10"></div>
  </div>

  <hr class="d-block hr-red my-5 float-left">

  <div class="w-100 d-flex flex-wrap justify-content-between mb-4">
    <div class="bg-white border-radius-rounded p-4" style="border-radius: 15px;">
     <span class="d-block text-muted">Simulation Réalisées</span>
     <span class="d-block m-4 h2 text-center font-weight-bold text-dark">220</span>
    </div>
    <div class="bg-white border-radius-rounded p-4" style="border-radius: 15px;">
     <span class="d-block text-muted">Simulation transformées en crédit</span>
     <span class="d-block m-4 h2 text-center font-weight-bold text-dark ">90</span>
    </div>
    <div class="bg-white border-radius-rounded p-4" style="border-radius: 15px;">
     <span class="d-block text-muted">Exploitations collectées</span>
     <span class="d-block m-4 h2 text-center font-weight-bold text-dark">127291</span>
    </div>
    <div class="bg-white border-radius-rounded p-4" style="border-radius: 15px;">
     <span class="d-block text-muted">Exploitations collectées</span>
     <span class="d-block m-4 h2 text-center font-weight-bold text-dark">382</span>
    </div>
  </div>
  </div>
  <div id="mapPart">
    <div id="map"></div>
    <div id="filterMenu" class="ol-unselectable ol-control scrollbar" style="background: #fff;
  z-index: 1;
  left: 2em;
  top: 1em;
  display: block;
  width: 300px;
  border-radius: 15px;
  height: 95%;
  padding: 1.2em;">
      <div class="d-flex ">
        <span class="mr-auto p-2">FILTRES</span>
        <div class="p-2 material-icons" debounceClick (debounceClick)="resetFilterMenu()">refresh</div>
        <div class="p-2 material-icons" style="color: #cfcfcf" debounceClick (debounceClick)="closeFilterMenu()">close
        </div>
      </div>
      <hr style="
        margin: 0;
        position: relative;
        width: 40px;
        height: 2.5px;
        bottom: 2.5px;
        left: 5px;
        background: var(--red);
    ">
      <div class="filter-select d-flex justify-content-around">
        <span debouceClick (debounceClick)="filterMode='Exploitation'"
          [attr.class]="filterMode=='Exploitation' ? 'p-2 text-dark' : 'p-2 text-muted'">Exploitation</span>
        <span debouceClick (debounceClick)="filterMode='Commercialisation'"
          [attr.class]="filterMode=='Commercialisation' ? 'p-2 text-dark' : 'p-2 text-muted'">Commercialisation</span>
      </div>
      <div class="filter-body p-2 overflow-x-hidden">
        <div *ngIf="filterMode == 'Exploitation'">
          <div class="mb-4">
            <label class="col-md-12">Taille de l'exploitation (Ha): </label>
            <div class="slider-wrapper slider-primary slider-ghost w-75 mx-auto">
              <input class="slider" id="slider" formNameControl='surf_range' type="text"
                data-slider-ticks-labels='[0, 100]' data-slider-ticks='[0, 100]' data-slider-min="0"
                data-slider-max="100" data-slider-step="5" data-slider-value="[0,100]" />
            </div>
          </div>
          <div class="Filternature d-flex flex-wrap mb-4">
            <label class="col-md-12">Nature du sol:</label>
            <div class="form-group col-md-4" *ngFor="let nature of natureSol">
              <input class="form-check-input square blue" type="radio" formControlName="nature_sol" [value]="nature">
              <span class="form-check-label">{{nature}}</span>
            </div>
          </div>
          <div class="Filternature d-flex flex-wrap mb-4">
            <label class="col-md-12">Type d'irrigation:</label>
            <div class="form-group col-md-4" *ngFor="let typeIrr of typeIrrgs">
              <input class="form-check-input square blue" type="radio" formControlName="type_irrigation"
                [value]="typeIrr">
              <span class="form-check-label">{{typeIrr}}</span>
            </div>
          </div>
          <div class="col-md-12 mb-4">
            <label>Mécanisation: </label>
            <ng-select class="select-grey" [items]="mechanismes" bindLabel="libelle" [closeOnSelect]="false"
              [searchable]="true" [formControlName]="'mechanisation'">
            </ng-select>
          </div>
          <div class="col-md-12 mb-4">
            <label>Technicité: </label>
            <ng-select class="select-grey" [items]="technicites" bindLabel="libelle" [closeOnSelect]="false"
              [searchable]="true" [formControlName]="'technicite'">
            </ng-select>
          </div>
        </div>
        <div *ngIf="filterMode == 'Commercialisation'">
          <div class="mb-4 flex-wrap ">
            <label *ngFor="let marche of marches" class="bg-light p-4 m-3" debouceClick
              (debounceClick)="exploitationForm.controls['marche'].setValue(marche)"
              [attr.class]="exploitationForm.controls['marche'].value && exploitationForm.controls['marche'].value.id ==  marche.id ? 'bg-primary p-3 m-3' : 'bg-light p-3 m-3'">{{marche.libelle}}</label>
          </div>
          <div class="col-md-12 mb-4">
            <label>Canal de Vente: </label>
            <ng-select class="select-grey" [items]="canalsVente" bindLabel="libelle" [closeOnSelect]="false"
              [searchable]="true" [formControlName]="'canal_vente'">
            </ng-select>
          </div>
          <div class="col-md-12 mb-4">
            <label>Valorisation: </label>
            <ng-select class="select-grey" [items]="valorisation" bindLabel="libelle" [closeOnSelect]="false"
              [searchable]="true" [formControlName]="'valorisation'">
            </ng-select>
          </div>
          <div class="col-md-12 mb-4">
            <label>Stabilité des prix: </label>
            <ng-select class="select-grey" [items]="stabilitesPrix" bindLabel="libelle" [closeOnSelect]="false"
              [searchable]="true" [formControlName]="'stabilite_prix'">
            </ng-select>
          </div>
          <div class="col-md-12 mb-4">
            <label>Qualité du produit: </label>
            <ng-select class="select-grey" [items]="qualitesProduit" bindLabel="libelle" [closeOnSelect]="false"
              [searchable]="true" [formControlName]="'qualite_produit'">
            </ng-select>
          </div>
        </div>
      </div>
    </div>
    <div id="layerSwitcherMenu" class="ol-unselectable ol-control scrollbar layerSwitcherMenu">
      <div class="d-flex ">
        <span class="mr-auto p-2" style="margin: 0;">BASE MAPS</span>
        <div class="p-2 material-icons" style="color: #cfcfcf">close</div>
      </div>
      <hr style="
      margin: 0;
      position: relative;
      width: 40px;
      height: 2.5px;
      bottom: 2.5px;
      left: 5px;
      background: var(--red);
  ">
      <span>Select a map:</span>
      <div class="mapsholder d-flex flex-wrap">
        <div class="relief" debounceClick (debounceClick)="switchBaseMap('relief')">Carte de relief</div>
        <div class="geographique" debounceClick (debounceClick)="switchBaseMap('geographique')">Carte géographique</div>
        <div class="satellite" debounceClick (debounceClick)="switchBaseMap('satellite')">Carte satellitaire</div>
        <div class="osm" debounceClick (debounceClick)="switchBaseMap('osm')">OpenStreetMap</div>
      </div>
      <span class="addFond" style="color: #b4cdf5;">
        <i class="material-icons" style="font-size: 12px">add</i>
        Add new map
      </span>
    </div>
    <div id="legend" class="ol-unselectable ol-control scrollbar rounded" style="background: #fff;">
      <div>
        <div class="panel-title mb-2">
          LEGENDE
        </div>
        <hr style="
        margin: 0;
        position: relative;
        width: 40px;
        height: 2.5px;
        bottom: 2.5px;
        background: var(--red);
    ">
        <div class="panel-body p-2">
          <div class="d-flex mb-4 flex-row justify-content-between" *ngIf="appliedFilter?.produit">
            <div class="flex-column text-secondary">Produit :</div>
            <div class="flex-column text-dark">{{appliedFilter?.produit.libelle}}</div>
          </div>
          <div class="d-flex mb-4 flex-row justify-content-between" *ngIf="appliedFilter?.variete">
            <div class="flex-column text-secondary">Varieté :</div>
            <div class="flex-column text-dark">{{appliedFilter?.variete.libelle}}</div>
          </div>
          <div class="mb-5">
            <li class="mb-2"><span style="vertical-align: super;">Exploitation</span></li>
            <div class="d-flex mb-4 flex-row justify-content-between" *ngIf="appliedFilter?.nature_sol">
              <div class="flex-column text-dark">Nature de sol :</div>
              <div class="flex-column text-primary">{{appliedFilter?.nature_sol}}</div>
            </div>
            <div class="d-flex mb-4 flex-row justify-content-between" *ngIf="appliedFilter?.type_irrigation">
              <div class="flex-column text-dark">Type d'irrigation :</div>
              <div class="flex-column text-primary">{{appliedFilter?.type_irrigation}}</div>
            </div>
            <div class="d-flex mb-4 flex-row justify-content-between" *ngIf="appliedFilter?.mechansime">
              <div class="flex-column text-dark">Mechanisation :</div>
              <div class="flex-column text-primary">{{appliedFilter?.mechansime.libelle}}</div>
            </div>
            <div class="d-flex mb-4 flex-row justify-content-between" *ngIf="appliedFilter?.technicite">
              <div class="flex-column text-dark">Technicité :</div>
              <div class="flex-column text-primary">{{appliedFilter?.technicite.libelle}}</div>
            </div>
          </div>
          <li class="mb-2"><span style="vertical-align: super;">Commercialisation</span></li>
          <div class="d-flex mb-4 flex-row justify-content-between" *ngIf="appliedFilter?.marche">
            <div class="flex-column text-dark">Type de Marché :</div>
            <div class="flex-column text-primary">{{appliedFilter?.marche.libelle}}</div>
          </div>
          <div class="d-flex mb-4 flex-row justify-content-between" *ngIf="appliedFilter?.canalVente">
            <div class="flex-column text-dark">Canal de vente :</div>
            <div class="flex-column text-primary">{{appliedFilter?.canalVente.libelle}}</div>
          </div>
          <div class="d-flex mb-4 flex-row justify-content-between" *ngIf="appliedFilter?.valorisation">
            <div class="flex-column text-dark">Valorisation :</div>
            <div class="flex-column text-primary">{{appliedFilter?.valorisation.libelle}}</div>
          </div>
          <div class="d-flex mb-4 flex-row justify-content-between" *ngIf="appliedFilter?.stabilitePrix">
            <div class="flex-column text-dark">Stabilités des prix :</div>
            <div class="flex-column text-primary">{{appliedFilter?.stabilitePrix.libelle}}</div>
          </div>
          <div class="d-flex mb-4 flex-row justify-content-between" *ngIf="appliedFilter?.qualiteProduit">
            <div class="flex-column text-dark">Qualité du produit :</div>
            <div class="flex-column text-primary">{{appliedFilter?.qualiteProduit.libelle}}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="overlay">

  </div>
</form>

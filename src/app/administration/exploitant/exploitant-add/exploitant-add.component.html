<form ngNoForm [formGroup]="exploitantForm" class="form-validate form-horizontal"
  (submit)="saveExploitant(exploitantForm.value)" novalidate="">
  <!-- START panel-->
  <div class="panel panel-default">
    <div class="panel-body">
      <div class="row">
        <div class="col-md-12 text-center">
          <img src="/assets/img/logo-text.png" height="105px">
        </div>
      </div>


      <!--start fieldset-->
      <div class="panel-body bt">
        <legend>
          <div class="panel-title">
            <a>
              <h4>{{'exploitant.exploitantinfo.info' | translateExploitant}}</h4>
            </a>
          </div>
        </legend>
        <div class="panel-body ng-scope">
          <!--row-->
          <div class="row">
            <div class="col-md-6">
              <div class="form-group required">
                <label class="control-label">{{ 'exploitant.lastname.label' | translateExploitant }}</label>
                <div>
                  <input formControlName="lastname" class="form-control" type="text" placeholder="" />
                  <span class="text-danger"
                    *ngIf="exploitantForm.controls['lastname'].hasError('required') && (exploitantForm.controls['lastname'].dirty || exploitantForm.controls['lastname'].touched)">{{ 'common.message.required' | translate }}</span>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group required">
                <label class="control-label">{{ 'exploitant.firstname.label' | translateExploitant }}</label>
                <div>
                  <input formControlName="firstname" class="form-control" type="text" placeholder="" />
                  <span class="text-danger"
                    *ngIf="exploitantForm.controls['firstname'].hasError('required') && (exploitantForm.controls['firstname'].dirty || exploitantForm.controls['firstname'].touched)">{{ 'common.message.required' | translate }}</span>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-2">
              <div class="form-group required">
                <label class="control-label">{{ 'exploitant.age.label' | translateExploitant }}</label>
                <div>
                  <input formControlName="age" class="form-control" type="text" placeholder="" />
                  <span class="text-danger"
                    *ngIf="exploitantForm.controls['age'].hasError('required') && (exploitantForm.controls['age'].dirty || exploitantForm.controls['age'].touched)">{{ 'common.message.required' | translate }}</span>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group required">
                <label class="control-label">{{ 'exploitant.cin.label' | translateExploitant }}</label>
                <div>
                  <input formControlName="cin" class="form-control" type="text" placeholder="" />
                  <span class="text-danger"
                    *ngIf="exploitantForm.controls['cin'].hasError('required') && (exploitantForm.controls['cin'].dirty || exploitantForm.controls['cin'].touched)">{{ 'common.message.required' | translate }}</span>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group required">
                <label class="control-label">{{ 'exploitant.telephone.label' | translateExploitant }}</label>
                <div>
                  <input formControlName="telephone" class="form-control" type="text" placeholder="" />
                  <span class="text-danger"
                    *ngIf="exploitantForm.controls['telephone'].hasError('required') && (exploitantForm.controls['telephone'].dirty || exploitantForm.controls['telephone'].touched)">{{ 'common.message.required' | translate }}</span>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6 d-flex flex-wrap">
                <label class="control-label">{{'exploitant.client.label' | translateExploitant}}</label>
                <div class="form-check form-check-inline">
                  <input class="form-check-input circle" type="radio" formControlName="isClient" value="true">
                  <span class="form-check-label">Oui</span>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input circle" type="radio" formControlName="isClient" value="false" [attr.checked]="true">
                  <span class="form-check-label">Non</span>
                </div>
            </div>
            <div class="col-sm-6">
              <label class="control-label">{{'exploitant.niveauEtude.label' | translateExploitant}}</label>
              <ng-select class="custom" [items]="niveaux" [closeOnSelect]="false"
                [searchable]="true" placeholder="Niveau d'études" [formControlName]="'niveau_etude'" >
              </ng-select>
            </div>
          </div>
          <!--row-->
        </div>
      </div>
      <!--end fieldSet1-->

      <!--start fieldset2-->
      <div class="panel-body bt">
        <legend>
          <div class="panel-title">
            <a>
              <h4>{{'exploitant.exploitationinfo.info' | translateExploitant}}</h4>
            </a>
          </div>
        </legend>
        <div class="panel-body ng-scope">
          <!--row-->
          <span>{{'exploitant.zone.label' | translateExploitant}}</span>


          <div class="mapsholder d-flex flex-wrap">
            <div class="col-sm-6">
              <label class="control-label">{{'exploitant.region.label' | translateExploitant}}</label>
              <ng-select class="custom" [items]="regions" bindLabel="libelle" [closeOnSelect]="false"
                [searchable]="true" placeholder="Région" [formControlName]="'region'" (clear)="loadProvinces()"
                (change)="loadProvinces()">
              </ng-select>
            </div>
            <div class="col-sm-6">
              <label class="control-label">{{'exploitant.province.label' | translateExploitant}}</label>
              <ng-select [items]="provinces" bindLabel="libelle" [closeOnSelect]="false" [searchable]="true"
                placeholder="Province" [formControlName]="'province'" (clear)="loadCercles()"
                (change)="loadCercles()">
              </ng-select>
            </div>
            <div class="col-sm-6">
              <label class="control-label">{{'exploitant.cercle.label' | translateExploitant}}</label>
              <ng-select [items]="cercles" bindLabel="libelle" [closeOnSelect]="false" [searchable]="true"
                placeholder="Cercle" [formControlName]="'cercle'" (clear)="loadCommunes()"
                (change)="loadCommunes()">
              </ng-select>
            </div>
            <div class="col-sm-6">
              <label class="control-label">{{'exploitant.commune.label' | translateExploitant}}</label>
              <ng-select [items]="communes" bindLabel="libelle" [closeOnSelect]="false" [searchable]="true"
                placeholder="Commune" [formControlName]="'commune'">
              </ng-select>
            </div>
          </div>
          <!--row-->
        </div>
      </div>
      <!--end fieldSet2-->

      <!--start fieldset3-->
      <div class="panel-body bt">
        <legend>
          <div class="panel-title">
            <a>
              <h4>{{'exploitant.activityinfo.info' | translateExploitant}}</h4>
            </a>
          </div>
        </legend>
          <!--row-->
          <div class="col-md-6 d-flex flex-wrap">
            <div class="form-group col-md-12">
              <label class="control-label">{{'exploitant.typeActivity.label' | translateExploitant}}</label>
              <div *ngFor="let type of typesActivite" class="form-check form-check-inline">
                <input class="form-check-input circle" type="radio" formControlName="typeActivite" [value]="type" (change)="getFamilleProduit()">
                <span class="form-check-label">{{type}}</span>
              </div>
            </div>
            <div class="form-group col-md-12">
              <label class="control-label">{{'exploitant.familleCulture.label' | translateExploitant}}</label>
              <ng-select [items]="famillesProduits" bindLabel="libelle" [closeOnSelect]="false" [searchable]="true"
                  placeholder="Famille de culture" [formControlName]="'familleProduit'" (change)="loadProduits()" (clear)="loadProduits()">
              </ng-select>
            </div>
            <div class="form-group col-md-12">
              <label class="control-label">{{'exploitant.culture.label' | translateExploitant}}</label>
              <ng-select [items]="produits" bindLabel="libelle" [closeOnSelect]="false" [searchable]="true"
                  placeholder="Culture" [formControlName]="'produit'">
              </ng-select>
            </div>
          </div>
        <!--row-->

      </div>
      <!--end fieldSet2-->
      <div class="d-flex mb-3">
        <button class="btn btn-default" type="button" routerLink="/exploitant/list">
          <span>{{ 'exploitant.cancelSim.label' | translateExploitant }}</span>
          <i class="material-icons md-18">close</i> </button>
        <button class="btn btn-juniper ml-auto" debounceClick (debounceClick)="saveExploitant(exploitantForm.value)">
          <span>{{ 'exploitant.launchSim.label' | translateExploitant }}</span>
          <i class="material-icons md-18">repeat</i> </button>
      </div>

    </div>
  </div>
  <!-- END panel-->
  <!-- START panel-->
  <p>
    <div class="panel panel-default">

    </div>

    <!-- END panel-->
</form>
<!-- END panel-->
